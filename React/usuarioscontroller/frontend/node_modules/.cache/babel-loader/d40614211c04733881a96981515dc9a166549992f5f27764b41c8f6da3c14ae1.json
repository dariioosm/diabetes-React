{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\React\\\\usuarioscontroller\\\\src\\\\components\\\\listaUsuario.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport Statistics from './Statistics';\nimport { contextoUsuario } from '../context/contextoUsuario';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://localhost/usuariocontroller\";\nconst UserList = () => {\n  _s();\n  const {\n    borraUsuario\n  } = useContext(contextoUsuario);\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [showStats, setShowStats] = useState(false);\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/get.php`);\n        setUsers(response.data);\n      } catch (error) {\n        console.error('Error al obtener los usuarios:', error);\n      }\n    };\n    fetchUsers();\n  }, []);\n  const modificarUsuario = (usuario, nuevosDatos) => {\n    axios.put(`${API_URL}/put.php`, {\n      usuario,\n      nombre: nuevosDatos.nombre,\n      apellidos: nuevosDatos.apellidos,\n      edad: nuevosDatos.edad,\n      pass: nuevosDatos.pass || undefined\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => {\n      if (response.data.success) {\n        alert(\"Usuario actualizado correctamente\");\n        window.location.reload();\n      } else {\n        alert(\"Error al actualizar usuario: \" + response.data.error);\n      }\n    }).catch(error => {\n      console.error(\"Error al actualizar usuario:\", error);\n      alert(\"No se pudo actualizar el usuario.\");\n    });\n  };\n  const handleModify = user => {\n    const nuevosDatos = {\n      nombre: prompt(\"Nuevo nombre:\", user.nombre),\n      apellidos: prompt(\"Nuevos apellidos:\", user.apellidos),\n      edad: prompt(\"Nueva fecha de nacimiento (YYYY-MM-DD):\", user.edad),\n      pass: prompt(\"Nueva contraseña (déjalo vacío si no quieres cambiarla):\")\n    };\n    modificarUsuario(user.usuario, nuevosDatos);\n  };\n  const handleShowStats = user => {\n    setSelectedUser(user);\n    setShowStats(true);\n  };\n  const handleDelete = async idUsuario => {\n    try {\n      const response = await axios.get(`${API_URL}/delete.php?id=${idUsuario}`);\n      const result = response.data;\n      if (result.success) {\n        setUsers(users.filter(user => user.idUsuario !== idUsuario));\n        borraUsuario(idUsuario);\n        alert(result.message);\n      } else {\n        alert(result.message);\n      }\n    } catch (error) {\n      console.error('Error al eliminar el usuario:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Lista de Usuarios\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), users.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No hay usuarios disponibles.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [user.usuario, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleModify(user),\n          children: \"Modificar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleShowStats(user),\n          children: \"Ver Estad\\xEDsticas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(user.idUsuario),\n          children: \"Eliminar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }, this)]\n      }, user.idUsuario, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this), showStats && selectedUser && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Estad\\xEDsticas de \", selectedUser.usuario]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Statistics, {\n        month: new Date().getMonth() + 1,\n        year: new Date().getFullYear(),\n        userId: selectedUser.idUsuario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n_s(UserList, \"o2Iqtb7o+1vS6yIHvRt3vHUpYHM=\");\n_c = UserList;\nexport default UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","Statistics","contextoUsuario","jsxDEV","_jsxDEV","API_URL","UserList","_s","borraUsuario","users","setUsers","selectedUser","setSelectedUser","showStats","setShowStats","fetchUsers","response","get","data","error","console","modificarUsuario","usuario","nuevosDatos","put","nombre","apellidos","edad","pass","undefined","headers","then","success","alert","window","location","reload","catch","handleModify","user","prompt","handleShowStats","handleDelete","idUsuario","result","filter","message","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","onClick","month","Date","getMonth","year","getFullYear","userId","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/React/usuarioscontroller/src/components/listaUsuario.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport Statistics from './Statistics';\r\nimport { contextoUsuario } from '../context/contextoUsuario';\r\n\r\nconst API_URL = \"http://localhost/usuariocontroller\";\r\n\r\nconst UserList = () => {\r\n    const { borraUsuario } = useContext(contextoUsuario);\r\n    const [users, setUsers] = useState([]);\r\n    const [selectedUser, setSelectedUser] = useState(null);\r\n    const [showStats, setShowStats] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            try {\r\n                const response = await axios.get(`${API_URL}/get.php`);\r\n                setUsers(response.data);\r\n            } catch (error) {\r\n                console.error('Error al obtener los usuarios:', error);\r\n            }\r\n        };\r\n\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const modificarUsuario = (usuario, nuevosDatos) => {\r\n        axios.put(`${API_URL}/put.php`, {\r\n            usuario,\r\n            nombre: nuevosDatos.nombre,\r\n            apellidos: nuevosDatos.apellidos,\r\n            edad: nuevosDatos.edad,\r\n            pass: nuevosDatos.pass || undefined\r\n        }, {\r\n            headers: { \"Content-Type\": \"application/json\" }\r\n        })\r\n        .then((response) => {\r\n            if (response.data.success) {\r\n                alert(\"Usuario actualizado correctamente\");\r\n                window.location.reload();\r\n            } else {\r\n                alert(\"Error al actualizar usuario: \" + response.data.error);\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error al actualizar usuario:\", error);\r\n            alert(\"No se pudo actualizar el usuario.\");\r\n        });\r\n    };\r\n\r\n    const handleModify = (user) => {\r\n        const nuevosDatos = {\r\n            nombre: prompt(\"Nuevo nombre:\", user.nombre),\r\n            apellidos: prompt(\"Nuevos apellidos:\", user.apellidos),\r\n            edad: prompt(\"Nueva fecha de nacimiento (YYYY-MM-DD):\", user.edad),\r\n            pass: prompt(\"Nueva contraseña (déjalo vacío si no quieres cambiarla):\")\r\n        };\r\n        modificarUsuario(user.usuario, nuevosDatos);\r\n    };\r\n\r\n    const handleShowStats = (user) => {\r\n        setSelectedUser(user);\r\n        setShowStats(true);\r\n    };\r\n\r\n    const handleDelete = async (idUsuario) => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/delete.php?id=${idUsuario}`);\r\n            const result = response.data;\r\n\r\n            if (result.success) {\r\n                setUsers(users.filter(user => user.idUsuario !== idUsuario));\r\n                borraUsuario(idUsuario);\r\n                alert(result.message);\r\n            } else {\r\n                alert(result.message);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al eliminar el usuario:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Lista de Usuarios</h2>\r\n            {users.length === 0 ? (\r\n                <p>No hay usuarios disponibles.</p>\r\n            ) : (\r\n                <ul>\r\n                    {users.map((user) => (\r\n                        <li key={user.idUsuario}>\r\n                            {user.usuario}\r\n                            <button onClick={() => handleModify(user)}>Modificar</button>\r\n                            <button onClick={() => handleShowStats(user)}>Ver Estadísticas</button>\r\n                            <button onClick={() => handleDelete(user.idUsuario)}>Eliminar</button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n\r\n            {showStats && selectedUser && (\r\n                <div>\r\n                    <h3>Estadísticas de {selectedUser.usuario}</h3>\r\n                    <Statistics\r\n                        month={new Date().getMonth() + 1}\r\n                        year={new Date().getFullYear()}\r\n                        userId={selectedUser.idUsuario}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}